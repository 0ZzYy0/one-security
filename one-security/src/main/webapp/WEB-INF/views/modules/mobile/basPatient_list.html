<!DOCTYPE html>
<html>
	<head>
		<title>人员列表</title>
		<#include "/header.html">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!-- <script src="../core/plugins/typeahead/bootstrap3-typeahead.min.js"></script> -->
		<script src="${request.contextPath}/statics/libs/app.min.js"></script>
		
		<link rel="stylesheet" href="${request.contextPath}/statics/css/bootstrap-table.min.css">
		<link rel="stylesheet" href="${request.contextPath}/statics/css/bootstrap.min.css">
		<link rel="stylesheet" href="${request.contextPath}/statics/css/font-awesome.min.css">
		<link rel="stylesheet" href="${request.contextPath}/statics/css/AdminLTE.min.css">
		<link rel="stylesheet" href="${request.contextPath}/statics/css/all-skins.min.css">
		<link rel="stylesheet" href="${request.contextPath}/statics/plugins/treegrid/jquery.treegrid.css">
		
		<script src="${request.contextPath}/statics/plugins/treegrid/jquery.treegrid.min.js"></script>
		<script src="${request.contextPath}/statics/plugins/treegrid/jquery.treegrid.bootstrap3.js"></script>
		<script src="${request.contextPath}/statics/plugins/treegrid/jquery.treegrid.extension.js"></script>
		<script src="${request.contextPath}/statics/plugins/treegrid/tree.table.js"></script>
		
		<script src="${request.contextPath}/statics/libs/jquery.min.js"></script>
		<script src="${request.contextPath}/statics/libs/vue.min.js"></script>
		<script src="${request.contextPath}/statics/libs/router.js"></script>
		<script src="${request.contextPath}/statics/libs/bootstrap.min.js"></script>
		<script src="${request.contextPath}/statics/libs/app.js"></script>
		<script src="${request.contextPath}/statics/plugins/layer/layer.js"></script>
		<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	</head>
	<body>
<div id="my_membe_list" class="content-wrapper" style="margin-left: 0px;">
<section class="content">
	<div class="box box-warning">
      <div class="box-header with-border">
      </div>
	  <div class="box-body no-padding">
      	<ul class="nav nav-stacked" id="basPatientList">
        </ul>
        <input type="hidden" id="deptId" value="${Session.deptId}"/>
	  </div>
	</div>
</section>
</div>
<script>
function basPatientInfo(infoId,tableName){
	window.location.href = "${request.contextPath}/bastoothposition/toUploadPhotos?infoId="+infoId+"&tableName="+tableName;
}

var vm = new Vue({
	el:'#my_membe_list',
	data:{
		user:{}
	},
	mounted: function () {
		  this.$nextTick(function () {
			  this.getList();
		  });
	},
	methods: {
		toMyInfo: function(){
			window.location.href = "${request.contextPath}/baspatient/toMyInfo";
        },
        getList: function(){
        	var deptId = $("#deptId").val();
	        $.ajax({
	            type: "GET",
	            url: baseURL + "baspatient/getBasPatientList/"+deptId,
	            async:false,
	            success: function(data){
        			$("#basPatientList").html("");
        			var htmls = '';
        			for ( var i = 0; i < data.length; i++) {
        				htmls += "<li>";
        				htmls += "	<a href=\"javascript:void(0);\" onclick=\"basPatientInfo('"+data[i].infoId+"','"+data[i].tableName+"')\">";
        				if(data[i].pName != null && data[i].pName != ""){
							htmls += 		data[i].name + "("+data[i].pName+")";
        				}else{
	        				htmls += 		data[i].name;
        				}
        				htmls += "		<span class=\"pull-right badge bg-blue\">"+data[i].type+"</span>";
        				htmls += "	</a>";
        				htmls += "</li>";
        			}
        			$("#basPatientList").append(htmls);
	            }
	        });
        }
	}
});
</script>
	</body>
</html>
